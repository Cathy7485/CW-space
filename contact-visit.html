<!DOCTYPE html>

<html lang="ch">

<head runat="server">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>
		CW-space共享辦公空間
	</title>
	<link href="favicon.ico" rel="shortcut icon" type="image/x-icon" />
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@8/swiper-bundle.min.css" />
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.css" />
	<link href="Content/main.css" rel="stylesheet" type="text/css" />
</head>

<body>
	<form runat="server">
		<header id="header"></header>
		<section id="banner" class="pt-0"></section>
		<main>
			<section id="banner" class="page-banner">
				<div class="banner-item">
					<img src="images/visit-banner.jpg" class="banner-img" alt="聯絡我們主視覺" />
				</div>
				<div class="banner-title">
					<div>聯絡我們-預約參觀</div>
				</div>
			</section>
			<section id="page-main" class="contact-box">
				<div class="container">
					<div class="contact-tab tab">
						<ul>
							<li><a href="javascript:void(0)" class="tab-item active" title="預約參觀">預約參觀</a></li>
							<li><a href="contact-reservation.html" class="tab-item" title="預約空間">預約空間</a></li>
							<li><a href="contact.html" class="tab-item" title="線上留言">線上留言</a></li>
							<li><a href="contact-access.html" class="tab-item" title="地理位置">地理位置</a></li>
						</ul>
					</div>
				</div>
				<div class="container">
					<div class="row">
						<div id="visit-reservation" class="reserve-list">
							<span class="mb-2 d-block">請填寫表單，將會有專人聯繫您</span>
							<dl class="form-list">
								<dt class="form-title">
									姓名<span class="notice ms-2">*</span>
								</dt>
								<dd class="form-info">
									<input type="text" class="name form-input w-100" placeholder="請輸入姓名">
								</dd>
							</dl>
							<dl class="form-list">
								<dt class="form-title">
									公司名稱<span class="notice ms-2">*</span>
								</dt>
								<dd class="form-info">
									<input type="text" class="company-name form-input w-100" placeholder="請輸入公司名稱">
								</dd>
							</dl>
							<dl class="form-list">
								<dt class="form-title">
									聯絡電話<span class="notice ms-2">*</span>
								</dt>
								<dd class="form-info">
									<input type="tel" class="contact-phone form-input w-100" placeholder="請輸入聯絡電話">
								</dd>
							</dl>
							<dl class="form-list">
								<dt class="form-title">
									電子信箱<span class="notice ms-2">*</span>
								</dt>
								<dd class="form-info">
									<input type="email" class="email form-input w-100" placeholder="請輸入電子信箱">
								</dd>
							</dl>
							<dl class="form-list">
								<dt class="form-title">
									想要參觀哪個空間<span class="notice ms-2">*</span>
								</dt>
								<dd class="form-info">
									<select class="space-type form-select form-input w-100">
										<option value="none" selected disabled hidden>請選擇您要參觀的空間</option>
										<option>共享辦公空間</option>
										<option>獨立辦公空間</option>
										<option>會議室空間</option>
									</select>
								</dd>
							</dl>
							<dl class="form-list">
								<dt class="form-title">
									參觀日期<span class="notice ms-2">*</span>
								</dt>
								<dd class="form-info">
									<div class="container-fulid"><div class="row">
										<div class="col-lg-6">
											<input type="text" id="date-input" class="visit-date form-select form-input w-100" placeholder="請選擇日期">
										</div>
										<div class="col-lg-6">
											<select type="text" class="visit-time form-input form-select w-100">
												<option value="9:00">9:00</option>
												<option value="10:00">10:00</option>
												<option value="11:00">11:00</option>
												<option value="12:00">12:00</option>
												<option value="13:00">13:00</option>
												<option value="14:00">14:00</option>
												<option value="15:00">15:00</option>
											</select>
										</div>
								</dd>
							</dl>
							<div class="btn-block">
								<a href="javascript:history.go(-1)" class="back-btn" title="返回">返回</a>
								<a href="javascript:void(0)" class="submit-btn" title="送出">送出</a>
							</div>
						</div>
					</div>
				</div>
			</section>
		</main>
		<footer id="footer"></footer>
	</form>
	<script src="Scripts/jquery-3.6.1.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/swiper@8/swiper-bundle.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/@cycjimmy/swiper-animation@6/dist/swiper-animation.umd.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/axios@1.1.2/dist/axios.min.js"></script>
	<script>
		//預約日曆套件
		$(function () {
			$("#date-input").datepicker({ dateFormat: 'yy-mm-dd' });
		});
		//預約參觀
			//送出按鍵監聽
			function visit() {
				const submitBtn = document.querySelector("#visit-reservation .submit-btn");
				submitBtn.addEventListener("click", addVisitOrder);
				function addVisitOrder() {
					const visitName = document.querySelector("#visit-reservation .name");
					const companyName = document.querySelector("#visit-reservation .company-name");
					const visitPhone = document.querySelector("#visit-reservation .contact-phone");
					const email = document.querySelector("#visit-reservation .email");
					const spaceType = document.querySelector("#visit-reservation .space-type");
					const visitDate = document.querySelector("#visit-reservation .visit-date");
					const visitTime = document.querySelector("#visit-reservation .visit-time");

					if (
						visitName.value == "" ||
						companyName.value == "" ||
						visitPhone.value == "" ||
						email.value == "" ||
						spaceType.value == "" ||
						visitDate.value == "" ||
						visitTime.value == ""
					) {
						alert("請填寫表單完整！");
						return;
					}


					let order = {
						name: visitName.value,
						company: companyName.value,
						phone: visitPhone.value,
						email: email.value,
						space: spaceType.value,
						appointment: visitDate.value,
						time: visitTime.value
					}

					const URL = "https://json-server-vercel-cw-space.vercel.app/reserves";
					let orderData = [];
					axios.post(URL, order)
						.then(function (response) {
							orderData = response.data;
							alert("預約成功！");
							//清空欄位
							visitName.value = "";
							companyName.value = "";
							visitPhone.value = "";
							email.value = "";
							spaceType.value = "共享辦公空間";
							visitDate.value = "";
							visitTime.value = "";

						})
						.catch(function (error) {
							console.log(error);
						});
				}
			}
			visit();
	</script>
	<script src="Scripts/template.js"></script>
	<script src="Scripts/main.js"></script>
</body>

</html>
